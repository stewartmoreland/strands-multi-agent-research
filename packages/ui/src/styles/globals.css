@import "tailwindcss";
@import "tw-animate-css";

@source "../components/**/*.{js,ts,jsx,tsx}";

@custom-variant dark (&:where(.dark, .dark *));

@theme {
  /* Font family */
  --font-sans: ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
  --font-mono: ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, "Liberation Mono", monospace;

  /* Border radius */
  --radius-sm: 0.25rem;
  --radius-md: 0.375rem;
  --radius-lg: 0.5rem;
  --radius-xl: 0.75rem;
  --radius-2xl: 1rem;

  /* Colors - Zinc base */
  --color-background: hsl(0 0% 100%);
  --color-foreground: hsl(240 10% 3.9%);

  --color-card: hsl(0 0% 100%);
  --color-card-foreground: hsl(240 10% 3.9%);

  --color-popover: hsl(0 0% 100%);
  --color-popover-foreground: hsl(240 10% 3.9%);

  --color-primary: hsl(240 5.9% 10%);
  --color-primary-foreground: hsl(0 0% 98%);

  --color-secondary: hsl(240 4.8% 95.9%);
  --color-secondary-foreground: hsl(240 5.9% 10%);

  --color-muted: hsl(240 4.8% 95.9%);
  --color-muted-foreground: hsl(240 3.8% 46.1%);

  --color-accent: hsl(240 4.8% 95.9%);
  --color-accent-foreground: hsl(240 5.9% 10%);

  --color-destructive: hsl(0 84.2% 60.2%);
  --color-destructive-foreground: hsl(0 0% 98%);

  --color-border: hsl(240 5.9% 90%);
  --color-input: hsl(240 5.9% 90%);
  --color-ring: hsl(240 5.9% 10%);

  /* Sidebar - Light mode */
  --color-sidebar: hsl(0 0% 98%);
  --color-sidebar-foreground: hsl(240 5.3% 26.1%);
  --color-sidebar-primary: hsl(240 5.9% 10%);
  --color-sidebar-primary-foreground: hsl(0 0% 98%);
  --color-sidebar-accent: hsl(240 4.8% 95.9%);
  --color-sidebar-accent-foreground: hsl(240 5.9% 10%);
  --color-sidebar-border: hsl(220 13% 91%);
  --color-sidebar-ring: hsl(217.2 91.2% 59.8%);
}

/* Dark class support */
.dark {
  --color-background: hsl(240 10% 3.9%);
  --color-foreground: hsl(0 0% 98%);
  --color-card: hsl(240 10% 3.9%);
  --color-card-foreground: hsl(0 0% 98%);
  --color-popover: hsl(240 10% 3.9%);
  --color-popover-foreground: hsl(0 0% 98%);
  --color-primary: hsl(0 0% 98%);
  --color-primary-foreground: hsl(240 5.9% 10%);
  --color-secondary: hsl(240 3.7% 15.9%);
  --color-secondary-foreground: hsl(0 0% 98%);
  --color-muted: hsl(240 3.7% 15.9%);
  --color-muted-foreground: hsl(240 5% 64.9%);
  --color-accent: hsl(240 3.7% 15.9%);
  --color-accent-foreground: hsl(0 0% 98%);
  --color-destructive: hsl(0 62.8% 30.6%);
  --color-destructive-foreground: hsl(0 0% 98%);
  --color-border: hsl(240 3.7% 15.9%);
  --color-input: hsl(240 3.7% 15.9%);
  --color-ring: hsl(240 4.9% 83.9%);
  --color-sidebar: hsl(240 5.9% 10%);
  --color-sidebar-foreground: hsl(240 4.8% 95.9%);
  --color-sidebar-primary: hsl(224.3 76.3% 48%);
  --color-sidebar-primary-foreground: hsl(0 0% 100%);
  --color-sidebar-accent: hsl(240 3.7% 15.9%);
  --color-sidebar-accent-foreground: hsl(240 4.8% 95.9%);
  --color-sidebar-border: hsl(240 3.7% 15.9%);
  --color-sidebar-ring: hsl(217.2 91.2% 59.8%);
}

/* Base styles */
* {
  border-color: var(--color-border);
}

body {
  background-color: var(--color-background);
  color: var(--color-foreground);
  font-family: var(--font-sans);
}

/* Smooth transitions for theme changes */
html {
  transition: color 0.3s ease, background-color 0.3s ease;
}

/* Markdown code blocks (rehype-highlight / highlight.js) - theme-aware */
:root .hljs,
.hljs {
  background: hsl(240 4.8% 95.9%);
  color: hsl(240 10% 3.9%);
  padding: 1rem;
  border-radius: var(--radius-md);
  overflow-x: auto;
  font-family: var(--font-mono);
  font-size: 0.875em;
  line-height: 1.6;
}
.dark .hljs {
  background: hsl(240 3.7% 15.9%);
  color: hsl(240 4.8% 95.9%);
}
.hljs-keyword,
.hljs-selector-tag { color: hsl(262 83% 58%); }
.dark .hljs-keyword,
.dark .hljs-selector-tag { color: hsl(263 70% 70%); }
.hljs-string { color: hsl(142 71% 35%); }
.dark .hljs-string { color: hsl(142 51% 55%); }
.hljs-comment { color: hsl(240 3.8% 46.1%); font-style: italic; }
.hljs-number { color: hsl(25 95% 53%); }
.dark .hljs-number { color: hsl(25 95% 63%); }
.hljs-title { color: hsl(217 91% 60%); }
.dark .hljs-title { color: hsl(217 91% 70%); }
.hljs-built_in { color: hsl(199 89% 48%); }
.hljs-params { color: hsl(240 10% 3.9%); }
.dark .hljs-params { color: hsl(240 4.8% 95.9%); }
.pre > code.hljs { padding: 0; background: transparent; }

/* Markdown content: line spacing and indentation */
.markdown-content {
  line-height: 1.65;
}
.markdown-content > * + * {
  margin-top: 0.75em;
}
.markdown-content p {
  margin-bottom: 0.5em;
}
.markdown-content p:last-child {
  margin-bottom: 0;
}
.markdown-content h1,
.markdown-content h2,
.markdown-content h3,
.markdown-content h4 {
  margin-top: 1.25em;
  margin-bottom: 0.5em;
  font-weight: 600;
  line-height: 1.3;
}
.markdown-content h1:first-child,
.markdown-content h2:first-child,
.markdown-content h3:first-child,
.markdown-content h4:first-child {
  margin-top: 0;
}
.markdown-content h1 { font-size: 1.5em; }
.markdown-content h2 { font-size: 1.25em; }
.markdown-content h3 { font-size: 1.1em; }
.markdown-content h4 { font-size: 1em; }
.markdown-content ul,
.markdown-content ol {
  margin-top: 0.5em;
  margin-bottom: 0.75em;
  padding-left: 1.5em;
}
.markdown-content li {
  margin-bottom: 0.35em;
}
.markdown-content li:last-child {
  margin-bottom: 0;
}
.markdown-content li > ul,
.markdown-content li > ol {
  margin-top: 0.35em;
  margin-bottom: 0.35em;
}
.markdown-content blockquote {
  margin: 0.75em 0;
  padding-left: 1em;
  border-left: 3px solid var(--color-border);
  color: var(--color-muted-foreground);
}
.markdown-content pre {
  margin: 0.75em 0;
}
.markdown-content table {
  margin: 0.75em 0;
  border-collapse: collapse;
  width: 100%;
}
.markdown-content th,
.markdown-content td {
  padding: 0.375em 0.75em;
  border: 1px solid var(--color-border);
  text-align: left;
}
.markdown-content th {
  font-weight: 600;
  background: var(--color-muted);
}
.dark .markdown-content th {
  background: var(--color-muted);
}
.markdown-content hr {
  margin: 1.25em 0;
  border: none;
  border-top: 1px solid var(--color-border);
}
